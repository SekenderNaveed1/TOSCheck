<p align="center">
  <img src="images/TOSCheck_logo.png" alt="TOSCheck Logo" width="200"/>
</p>

# TOSCheck

Most people don‚Äôt read the Terms of Service, even though that‚Äôs where companies quietly decide what they can do with your data, rights, and time.  

TOSCheck exists to make that a little less painful. It scans Terms of Service and Privacy Policies, flags the parts that stand out, and explains them in plain language. The goal is simple: help people actually understand what they‚Äôre agreeing to.

The idea came after reading about a chess player who won $1,000 just by reading the fine print everyone else ignored. Funny story, but also proof that nobody really reads this stuff, even when it matters.

I‚Äôve built other projects before, like *Equigrade*, which tried to make grading fairer in education. It never took off, LLMs changed how classes worked, and professors moved on. TOSCheck comes from the same place, though: wanting to build tools that give people clarity and control.  

This one‚Äôs smaller, simpler, and personal. It‚Äôs not about building something big, just something useful that should‚Äôve existed already.

If this helps someone actually read what they‚Äôre agreeing to, that‚Äôs enough.  
No promises it‚Äôll win you $1,000 like that chess story, but at least you‚Äôll know what you signed.

And if you‚Äôre skimming this README, that‚Äôs okay ‚Äî you‚Äôre kind of proving the point.

## Why now

Everyone‚Äôs using AI tools, but nobody‚Äôs reading the fine print that comes with them.  
New apps, new APIs, new ‚Äúwe value your privacy‚Äù pop-ups ‚Äî all of them say something you probably shouldn‚Äôt ignore.  
TOSCheck is just a small push toward paying attention again.

## What it might flag

**Input:**  
> ‚ÄúWe may change these terms at any time without notice. We may share your information with partners. Disputes will be handled by binding arbitration.‚Äù

**Output:**  
Unilateral changes, Data sharing, Arbitration.  
Short, direct, and exactly what you need to know.

TOSCheck doesn‚Äôt just summarize at random, it uses a local LLM (via Ollama or your configured model) to read the text line by line, score each sentence for legal patterns, and cite the lines that triggered each flag.

It looks for things like  
- Unilateral authority: ‚Äúwe can change this whenever we want‚Äù  
- Data sharing: ‚Äúthird parties,‚Äù ‚Äúaffiliates,‚Äù ‚Äúpartners‚Äù  
- Binding arbitration or waiver of rights  
- Vague permissions: ‚Äúfor purposes deemed appropriate‚Äù  
- Opt-out tricks hidden in the text  

It doesn‚Äôt editorialize or moralize, it just points out the weird stuff so you can decide what matters.

## Privacy

No uploads. No tracking. No servers.  
Everything runs entirely on your machine.  
If you accidentally share something, that‚Äôs on you, not the app.

## For Developers

If you‚Äôre reading this section, you probably already read GitHub‚Äôs API Terms before agreeing to them. Congratulations, you‚Äôre already ahead of 99% of people.  
If you didn‚Äôt, that‚Äôs fine too. You‚Äôll fit right in here.

As of right now, I‚Äôd recommend this for people who are comfortable with the command line and know a bit of coding.  
You don‚Äôt need to be some terminal wizard, but you should at least know how to `cd` into a folder without opening Stack Overflow.  

Everything here is CLI-based for now, and while it‚Äôs not *hard*, it definitely *looks* intimidating if you‚Äôve never done it before.  
You can totally figure it out with some patience (and maybe an LLM holding your hand through it), but yeah ‚Äî this is a dev-friendly zone for now.  
If that ever changes, great. Until then, this one‚Äôs for people who don‚Äôt mind a terminal window.

## How It Works (Technical Overview)

TOSCheck runs on a local Retrieval-Augmented Generation (RAG) pipeline. It takes a Terms of Service or Privacy Policy, breaks it into meaningful pieces, embeds them, and uses a local model to compare what it finds against known legal risk patterns ‚Äî all directly on your machine.

### 1. Text Extraction and Normalization
Feed it a text file, a PDF, or a URL.  
`read_text()` handles the cleanup: removing junk, stripping formatting, and leaving behind clean, readable content.

### 2. Clause-Aware Chunking
Instead of chopping text into random parts, TOSCheck uses a custom chunker that understands clauses and sentence structure.  
It splits where it makes sense ‚Äî after punctuation, newlines, or long semicolons ‚Äî so each chunk keeps its full meaning.

### 3. Embedding and Indexing
Each chunk is embedded using `nomic-embed-text` through Ollama and stored in `.ragcache` for fast reuse.  
Two embedding spaces are maintained:
- **`tos_rag`** ‚Äî embeddings for your document  
- **`kb_rag`** ‚Äî curated knowledge base of legal patterns (like Arbitration, Data Sharing, or Unilateral Changes)

### 4. Retrieval
Each clause is compared to the knowledge base using cosine similarity.  
When something matches closely (e.g. ‚ÄúYou waive any right to a jury trial‚Äù), it flags that clause as related to a known risk area.

### 5. Contextual Explanation
The matched clauses are then passed to a local or remote LLM, which:
- Summarizes what the clause actually says in plain English  
- Explains why it‚Äôs relevant or risky  
- Labels it (like ‚ÄúArbitration‚Äù or ‚ÄúData Sharing‚Äù)  
- Optionally adds a severity tag or score

### 6. Dual-RAG Reasoning
This is where TOSCheck stands out.  
It first retrieves matches from the legal pattern KB, *then* retrieves supporting context from the same document.  
That double grounding keeps explanations accurate and cuts down on hallucination or overreach.

### 7. Report Generation
Once analysis is done, two reports are generated:
- **Markdown (`.md`)** ‚Äî readable summary with highlighted risks and explanations  
- **JSON (`.json`)** ‚Äî structured data for automation or integration into other tools

### 8. Local by Default
Everything happens locally ‚Äî no uploads, no tracking, no hidden API calls.  
If you want cloud inference, you have to opt in yourself. Otherwise, everything stays offline and private.

---

## System Flow

TOSCheck runs like a pipeline ‚Äî text goes in, insight comes out.

1. **Input Layer** ‚Äî handles `.txt`, `.pdf`, or URL input via `trafilatura`  
2. **Normalization & Chunking** ‚Äî cleans and segments content into meaningful clauses  
3. **Embedding & Indexing** ‚Äî converts chunks to vectors using `nomic-embed-text`  
4. **Knowledge Base Comparison** ‚Äî finds similar legal clauses using cosine similarity  
5. **Dual-RAG Reasoning** ‚Äî combines KB and document context for grounded explanations  
6. **Report Generation** ‚Äî outputs Markdown and JSON summaries

---

## System Architecture

The architecture follows a simple but reliable structure:

```
User Input ‚Üí Extractor ‚Üí Chunker ‚Üí Indexer ‚Üí Retriever ‚Üí Explainer ‚Üí Reporter
```

Each module is independent and testable, making it easy to extend or replace parts of the pipeline.  
For example, you can swap the embedding model, change the RAG cache path, or hook in a different LLM ‚Äî all with environment variables.

### Environment Configuration

```
MODEL=llama3
EMBED_MODEL=nomic-embed-text
RAG_CACHE_DIR=.ragcache
```

Optional (for cloud use):
```
OPENAI_API_KEY=sk-yourkey
OPENAI_BASE_URL=https://api.openai.com/v1
```

### Cache Metadata

Every run stores a lightweight `meta.json` in `.ragcache` to track:
- Embedding model name and dimensions  
- Hash of vector files  
- Timestamp  
- Version  

If the system detects a mismatch, it‚Äôll automatically re-index to stay consistent.

---

## System Flowchart

Here‚Äôs how everything connects under the hood:

<p align="center">
  <img src="images/Diagram_for_TOS_Check.png" alt="TOSCheck System Flowchart" width="600"/>
</p>

---

In short: TOSCheck is a clean, modular RAG stack that lives entirely on your machine.  
No gimmicks ‚Äî just a practical way to read what everyone else skips.

## Installation & Setup

All you need is Python and [Ollama](https://ollama.ai), because we like our models where we can see them ‚Äî on our own machines.

### 1. Clone the repo
```bash
git clone https://github.com/SekenderNaveed1/TOSCheck.git
cd TOSCheck
```

### 2. Set up your environment
```bash
python -m venv .venv
source .venv/bin/activate        # Mac/Linux
.venv\Scripts\activate           # Windows
pip install -r requirements.txt
```

### 3. Install Ollama
TOSCheck runs best with [Ollama](https://ollama.ai).  
Pull a model:
```bash
ollama pull llama3
```

**Hardware tip:** Run it on a GPU if you can.  
If you‚Äôre on CPU, expect your fans to go turbo. It still works ‚Äî just slower.

### 4. Create your `.env`
```
MODEL=llama3
EMBED_MODEL=nomic-embed-text
RAG_CACHE_DIR=.ragcache
```
If you want to use a cloud model:
```
OPENAI_API_KEY=sk-yourkeyhere
```

### 5. Run it
```bash
python -m toscheck.app sample.txt
```

It‚Äôll read, clean, chunk, match, and flag ‚Äî then give you Markdown and JSON reports:
```
report.md
report.json
```

Example output:
```
[üîç] Analyzing Terms of Service...
Found 3 flagged clauses:
 - "We may change these terms at any time..." ‚Üí Unilateral Changes
 - "We may share your information with partners." ‚Üí Data Sharing
 - "Disputes will be handled by binding arbitration." ‚Üí Arbitration
Report saved to scan_report.md
```

TOSCheck caches embeddings in `.ragcache`, so reruns are instant.  
If things get messy:
```bash
rm -rf .ragcache kb_rag tos_rag
```

## FAQ

**Does this replace a lawyer?**  
No. It just helps you figure out what to ask a lawyer about, assuming you can afford one.

**Will it make me $1000 for reading terms?**  
Probably not. But it might save you from giving away the rights to your data, your ideas, and your soul.

**Why does it run locally?**  
Because privacy tools that send data away make zero sense.  
No servers, no telemetry, no ‚Äúresearch analytics.‚Äù Everything stays on your machine.

**Can I run this without knowing how to code?**  
Technically yes, practically no.  
If you can type `python -m toscheck.app sample.txt`, you‚Äôre good.

**Why the name ‚ÄúTOSCheck‚Äù?**  
Because everything cooler was taken. And I refused to name it something with ‚ÄúAI‚Äù in it.

**What models does it use?**  
Whatever you point it to ‚Äî local via Ollama or API if you‚Äôre fancy. It doesn‚Äôt care.

**Is this giving me legal advice?**  
Absolutely not. It just flags suspicious stuff so you can decide what actually matters.

**Does it store or send my data anywhere?**  
Nope. Everything happens locally.  
If you drag your tax returns in here, that‚Äôs on you.

**How accurate is it?**  
Pretty solid.  
It‚Äôs not perfect, but it catches the big-ticket stuff ‚Äî arbitration, vague language, ‚Äúwe may change these terms,‚Äù and data sharing.  
I didn‚Äôt test it with F1 scores or benchmarks or any of that academic stuff ‚Äî this isn‚Äôt a paper.  
But on real-world docs? It did surprisingly well. Like ‚Äúwait, that actually worked‚Äù levels of good.

**Why make this at all?**  
Because people scroll through ‚ÄúI agree‚Äù like muscle memory, and companies count on that.  
People see a small number and stop asking questions, this project exists to make reading the details less painful before it bites you.

**Can I contribute?**  
Sure. PRs, issues, chaos welcome. If you break something, at least tell me how.

**Will this ever have a UI?**  
Maybe. Right now, CLI only, fast, quiet, looks cool. A web UI might come later.

**Can I use it at work?**  
If your job lets you use open-source, yes. If not, maybe read the tech policy. (See? Reading helps.)

**Will it yell at me for not reading the TOS?**  
No, it‚Äôll just silently judge you. Which hurts more.

**Does it work on Privacy Policies too?**  
Yes. That‚Äôs actually where the real chaos hides.

**Does it have plans for updates?**  
Yeah ‚Äî maybe prettier reports, more pattern types, maybe a UI if I get bored again, which I sincerely hope I don‚Äôt.

**Is this an ‚ÄúAI startup‚Äù?**  
No. It‚Äôs not a company. It‚Äôs just a project that should‚Äôve existed already.

**What‚Äôs the goal?**  
Clarity.  
If one person stops and actually reads before hitting ‚ÄúI agree,‚Äù that‚Äôs a win.  
If not, at least I read the terms this time.

## Final Note

I didn‚Äôt name this something with ‚ÄúAI‚Äù on purpose. The word‚Äôs everywhere ‚Äî on products that don‚Äôt need it.  
TOSCheck isn‚Äôt hype or magic; it just reads what people don‚Äôt.  
Testing LLMs paid my bills in Junior year of college, but even then I knew they weren‚Äôt the answer to everything.  
This project‚Äôs small, local, and practical,  it exists because someone had to build it.
